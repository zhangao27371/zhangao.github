<!DOCTYPE html>
<html lang="zh-CN">
<head>
   <meta charset="UTF-8">
   <title>æŠ½å¥–è½¬ç›˜</title>
   <style>
       body { 
           text-align: center; 
           background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
           min-height: 100vh;
           display: flex;
           flex-direction: column;
           justify-content: center;
           align-items: center;
           font-family: 'Microsoft YaHei', sans-serif;
           padding: 20px;
       }
       
       .box { 
           width: 500px; 
           height: 500px; 
           margin: 10px auto; 
           position: relative; 
           overflow: visible;
           display: flex; 
           justify-content: center; 
           align-items: center; 
       }
       
       /* å¤–æ¡† */
       .outer-frame {
           position: absolute;
           width: 520px;
           height: 520px;
           border-radius: 50%;
           background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
           box-shadow: 0 0 30px rgba(255, 215, 0, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.3);
           z-index: 0;
       }
       
       /* å†…æ¡† */
       .inner-frame {
           position: absolute;
           width: 480px;
           height: 480px;
           border-radius: 50%;
           background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
           box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
           z-index: 1;
       }
       
       .main { 
           width: 460px; 
           height: 460px; 
           box-sizing: border-box; 
           border: 4px solid #fff; 
           border-radius: 50%; 
           overflow: hidden; 
           position: relative; 
           transition: all 5s cubic-bezier(0.25, 0.1, 0.25, 1);
           box-shadow: 0 10px 30px rgba(0,0,0,0.3);
           z-index: 2;
       }
       
       /* æŒ‡é’ˆå®¹å™¨ */
       .pointer-container {
           position: absolute;
           top: -30px;
           left: 50%;
           transform: translateX(-50%);
           z-index: 10;
       }
       
       /* æŒ‡é’ˆä¸»ä½“ */
       .pointer {
           width: 0;
           height: 0;
           border-left: 25px solid transparent;
           border-right: 25px solid transparent;
           border-top: 50px solid #ff4444;
           position: relative;
           filter: drop-shadow(0 3px 5px rgba(0,0,0,0.3));
       }
       
       /* æŒ‡é’ˆé«˜å…‰ */
       .pointer::after {
           content: '';
           position: absolute;
           top: 5px;
           left: 50%;
           transform: translateX(-50%);
           width: 0;
           height: 0;
           border-left: 15px solid transparent;
           border-right: 15px solid transparent;
           border-top: 25px solid rgba(255,255,255,0.3);
       }
       
       /* çŒ›æ”»æ–‡å­—æ ·å¼ */
       .winner { 
           font-size: 36px; 
           color: #ff4444; 
           font-weight: bold;
           margin-top: 30px;
           min-height: 50px;
           text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
           background: rgba(255,255,255,0.1);
           padding: 20px 40px;
           border-radius: 50px;
           display: inline-block;
           border: 2px solid #ff4444;
           animation: pulse 1s infinite;
       }
       
       @keyframes pulse {
           0% { transform: scale(1); }
           50% { transform: scale(1.05); }
           100% { transform: scale(1); }
       }
       
       button {
           background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
           color: white;
           border: none;
           padding: 18px 50px;
           font-size: 20px;
           font-weight: bold;
           border-radius: 50px;
           cursor: pointer;
           transition: all 0.3s;
           box-shadow: 0 8px 20px rgba(255,107,107,0.3);
           margin-top: 30px;
           position: relative;
           overflow: hidden;
       }
       
       button:hover:not(:disabled) {
           transform: translateY(-3px);
           box-shadow: 0 12px 25px rgba(255,107,107,0.4);
       }
       
       button:disabled {
           background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
           cursor: not-allowed;
           transform: none;
       }
       
       button::before {
           content: '';
           position: absolute;
           top: 50%;
           left: 50%;
           width: 0;
           height: 0;
           border-radius: 50%;
           background: rgba(255,255,255,0.3);
           transform: translate(-50%, -50%);
           transition: width 0.6s, height 0.6s;
       }
       
       button:hover:not(:disabled)::before {
           width: 300px;
           height: 300px;
       }
       
       @media (max-width: 600px) {
           .box {
               width: 350px;
               height: 350px;
           }
           
           .outer-frame {
               width: 370px;
               height: 370px;
           }
           
           .inner-frame {
               width: 340px;
               height: 340px;
           }
           
           .main {
               width: 320px;
               height: 320px;
           }
           
           .pointer {
               border-left-width: 20px;
               border-right-width: 20px;
               border-top-width: 40px;
           }
           
           .pointer::after {
               border-left-width: 12px;
               border-right-width: 12px;
               border-top-width: 20px;
           }
           
           button {
               padding: 15px 35px;
               font-size: 18px;
           }
           
           .winner {
               font-size: 28px;
               padding: 15px 30px;
           }
       }
   </style>
</head>
<body>
   <div class="box">
       <!-- å¤–æ¡† -->
       <div class="outer-frame"></div>
       <!-- å†…æ¡† -->
       <div class="inner-frame"></div>
       
       <div class="main" id="wheel" ontransitionend="end()">
           <!-- è½¬ç›˜å†…å®¹å°†é€šè¿‡CanvasåŠ¨æ€ç”Ÿæˆ -->
       </div>
       
       <!-- ç®€åŒ–çš„æŒ‡é’ˆè®¾è®¡ -->
       <div class="pointer-container">
           <div class="pointer"></div>
       </div>
   </div>
   
   <button onclick="start()" id="startBtn">å¼€å§‹æŠ½å¥–</button>
   <div class="winner" id="winner"></div>
   
   <script type="text/javascript">
       var rotate = 0;
       var isRunning = false;
       var targetIndex = 0;
       
       // å®šä¹‰7ä¸ªå¥–å“ï¼Œä½¿ç”¨æ›´ç¾è§‚çš„é¢œè‰²
       var list = [
           { title: 'æœºå¯†èˆªå¤©', color: '#e74c3c' },
           { title: 'ç»å¯†èˆªå¤©', color: '#3498db' },
           { title: 'æœºå¯†å·´å…‹ä»€', color: '#2ecc71' },
           { title: 'ç»å¯†å·´å…‹ä»€', color: '#f39c12' },
           { title: 'æ½®æ±ç›‘ç‹±', color: '#9b59b6' },
           { title: 'æœºå¯†å¤§å', color: '#1abc9c' },
           { title: 'ç»å¯†å¤§å', color: '#e67e22' }
       ];
       
       var perAngle = 360 / list.length;
       
       // ä½¿ç”¨Canvasåˆ›å»ºè½¬ç›˜
       function createWheel() {
           const canvas = document.createElement('canvas');
           canvas.width = 460;
           canvas.height = 460;
           const ctx = canvas.getContext('2d');
           
           const centerX = 230;
           const centerY = 230;
           const radius = 220;
           
           // æ¸…ç©ºç”»å¸ƒ
           ctx.clearRect(0, 0, 460, 460);
           
           // ç»˜åˆ¶æ‰‡å½¢
           for (let i = 0; i < list.length; i++) {
               const startAngle = (i * perAngle - 90) * Math.PI / 180; // ä»é¡¶éƒ¨å¼€å§‹
               const endAngle = ((i + 1) * perAngle - 90) * Math.PI / 180;
               
               // ç»˜åˆ¶æ‰‡å½¢
               ctx.beginPath();
               ctx.moveTo(centerX, centerY);
               ctx.arc(centerX, centerY, radius, startAngle, endAngle);
               ctx.closePath();
               ctx.fillStyle = list[i].color;
               ctx.fill();
               ctx.strokeStyle = 'white';
               ctx.lineWidth = 3;
               ctx.stroke();
               
               // ç»˜åˆ¶æ–‡å­—
               const textAngle = startAngle + (endAngle - startAngle) / 2;
               const textRadius = radius * 0.7;
               const textX = centerX + textRadius * Math.cos(textAngle);
               const textY = centerY + textRadius * Math.sin(textAngle);
               
               ctx.save();
               ctx.translate(textX, textY);
               ctx.rotate(textAngle + Math.PI / 2);
               ctx.fillStyle = 'white';
               ctx.font = 'bold 14px Microsoft YaHei';
               ctx.textAlign = 'center';
               ctx.textBaseline = 'middle';
               ctx.fillText(list[i].title, 0, 0);
               ctx.restore();
           }
           
           // ç»˜åˆ¶ä¸­å¿ƒåœ†
           ctx.beginPath();
           ctx.arc(centerX, centerY, 20, 0, 2 * Math.PI);
           ctx.fillStyle = '#fff';
           ctx.fill();
           ctx.strokeStyle = '#ff4444';
           ctx.lineWidth = 3;
           ctx.stroke();
           
           document.getElementById('wheel').appendChild(canvas);
       }
       
       function start() {
           if (isRunning) {
               console.warn('æ­£åœ¨è½¬åŠ¨ä¸­...');
               return;
           }
           
           isRunning = true;
           document.getElementById('winner').innerHTML = '';
           document.getElementById('startBtn').disabled = true;
           document.getElementById('startBtn').textContent = 'è½¬åŠ¨ä¸­...';
           
           // éšæœºé€‰æ‹©ä¸€ä¸ªå¥–å“
           targetIndex = Math.floor(Math.random() * list.length);
           
           // ç²¾ç¡®è®¡ç®—ç›®æ ‡è§’åº¦ï¼Œç¡®ä¿æŒ‡é’ˆæŒ‡å‘æ ¼å­ä¸­å¿ƒ
           // æ¯ä¸ªæ ¼å­çš„ä¸­å¿ƒè§’åº¦
           const targetSectorCenter = targetIndex * perAngle + perAngle / 2;
           // è¦è®©è¿™ä¸ªä¸­å¿ƒå¯¹å‡†æŒ‡é’ˆï¼ˆé¡¶éƒ¨ï¼‰ï¼Œéœ€è¦æ—‹è½¬çš„è§’åº¦
           const rotationNeeded = 90 - targetSectorCenter;
           
           // å¢åŠ æ—‹è½¬åœˆæ•°ï¼šæœ€ä½3åœˆï¼Œæœ€é«˜6åœˆ
           const spins = 3 + Math.floor(Math.random() * 4); // 3-6åœˆ
           rotate = spins * 360 + rotationNeeded;
           
           const wheel = document.getElementById('wheel');
           wheel.style.transform = `rotate(${rotate}deg)`;
           
           console.log('=== è°ƒè¯•ä¿¡æ¯ ===');
           console.log('æ—‹è½¬åœˆæ•°:', spins);
           console.log('ç›®æ ‡ç´¢å¼•:', targetIndex);
           console.log('ç›®æ ‡é¡¹ç›®:', list[targetIndex].title);
           console.log('ç›®æ ‡æ ¼å­ä¸­å¿ƒè§’åº¦:', targetSectorCenter);
           console.log('éœ€è¦æ—‹è½¬è§’åº¦:', rotationNeeded);
           console.log('æ€»æ—‹è½¬è§’åº¦:', rotate);
       }
       
       function end() {
           isRunning = false;
           document.getElementById('startBtn').disabled = false;
           document.getElementById('startBtn').textContent = 'å¼€å§‹æŠ½å¥–';
           
           // åªæ˜¾ç¤º"çŒ›æ”»ï¼"
           document.getElementById('winner').innerHTML = 'ğŸ”¥ çŒ›æ”»ï¼';
           
           console.log('=== æœ€ç»ˆç»“æœ ===');
           console.log('ä¸­å¥–é¡¹ç›®:', list[targetIndex].title);
       }
       
       // é¡µé¢åŠ è½½æ—¶åˆ›å»ºè½¬ç›˜
       window.onload = function() {
           createWheel();
       };
   </script>
</body>
</html>
